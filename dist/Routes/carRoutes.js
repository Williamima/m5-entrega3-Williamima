"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.carRouter = void 0;
const express_1 = require("express");
const middlewares_1 = require("../middlewares");
const Services_1 = require("../Services");
const tsyringe_1 = require("tsyringe");
const CarControllers_1 = require("../controllers/CarControllers");
const schemas_1 = require("../schemas");
exports.carRouter = (0, express_1.Router)();
tsyringe_1.container.registerSingleton("CarServices", Services_1.CarServices);
const carControllers = tsyringe_1.container.resolve(CarControllers_1.CarControllers);
const createCar = (req, res) => carControllers.create(req, res);
const findManyCars = (req, res) => carControllers.findMany(req, res);
const findOneCar = (req, res) => carControllers.findOne(req, res);
const updateCar = (req, res) => carControllers.update(req, res);
const deleteCar = (req, res) => carControllers.delete(req, res);
exports.carRouter.post("/", middlewares_1.ensureMiddleware.validateBody(schemas_1.carCreateSchema), createCar);
exports.carRouter.get("/", findManyCars);
exports.carRouter.use("/:id", middlewares_1.ensureMiddleware.carIdExists);
exports.carRouter.get("/:id", findOneCar);
exports.carRouter.patch("/:id", middlewares_1.ensureMiddleware.validateBody(schemas_1.carUpdateSchema), updateCar);
exports.carRouter.delete("/:id", deleteCar);
